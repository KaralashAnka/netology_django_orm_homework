# Задание 2 (дополнительное): Онлайн-библиотека

## Описание задачи

Создание Django-приложения для управления библиотекой книг с возможностью сортировки и навигации по датам публикации.

## Структура проекта

```
task2_books/
├── manage.py                     # Управление Django проектом
├── requirements.txt              # Зависимости проекта
├── books_project/                # Настройки проекта
│   ├── __init__.py
│   ├── settings.py              # Конфигурация Django
│   ├── urls.py                  # Главные URL маршруты
│   ├── wsgi.py
│   └── asgi.py
└── books/                        # Django приложение
    ├── __init__.py
    ├── models.py                # Модель Book
    ├── views.py                 # Представления
    ├── urls.py                  # URL маршруты приложения
    ├── admin.py                 # Настройка админки
    ├── apps.py
    ├── migrations/              # Миграции БД
    └── templates/books/         # HTML шаблоны
        ├── base.html
        ├── book_list.html
        └── book_detail.html
```

## Реализованные функции

### Модель Book (models.py)
- `name` - название книги (CharField, max_length=200)
- `author` - автор книги (CharField, max_length=200)
- `pub_date` - дата публикации (DateField)

### Представления (views.py)

1. **book_list** - список всех книг с сортировкой
   - По умолчанию сортировка по дате публикации
   - Параметр `?order=name` - сортировка по названию
   - Параметр `?order=pub_date` - сортировка по дате

2. **book_detail** - детальная страница книги
   - Доступ по дате публикации
   - Отображение всех книг с той же датой публикации
   - Навигация к предыдущей и следующей дате

### URL маршруты
- `/` - главная страница со списком книг
- `/?order=name` - список с сортировкой по названию
- `/?order=pub_date` - список с сортировкой по дате
- `/books/<pub_date>/` - детальная страница книги

## Установка и запуск

### 1. Установка зависимостей

```bash
# Создание виртуального окружения (рекомендуется)
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows

# Установка Django
pip install -r requirements.txt
```

### 2. Создание базы данных

```bash
# Создание миграций
python manage.py makemigrations

# Применение миграций
python manage.py migrate
```

### 3. Создание суперпользователя

```bash
python manage.py createsuperuser
```

Введите:
- Username
- Email (опционально)
- Password (дважды)

### 4. Добавление книг через админку

```bash
# Запуск сервера
python manage.py runserver
```

Откройте в браузере:
1. `http://127.0.0.1:8000/admin/` - войдите с учетными данными суперпользователя
2. Перейдите в раздел "Книги"
3. Нажмите "Добавить книгу"
4. Заполните поля:
   - Название
   - Автор
   - Дата публикации
5. Сохраните книгу

### 5. Просмотр библиотеки

Откройте в браузере: `http://127.0.0.1:8000/`

## Примеры использования

### Добавление книг через Django shell

```python
python manage.py shell

from books.models import Book
from datetime import date

# Добавление книги
Book.objects.create(
    name="Война и мир",
    author="Лев Толстой",
    pub_date=date(1869, 1, 1)
)

Book.objects.create(
    name="Преступление и наказание",
    author="Фёдор Достоевский",
    pub_date=date(1866, 1, 1)
)

Book.objects.create(
    name="Мастер и Маргарита",
    author="Михаил Булгаков",
    pub_date=date(1967, 1, 1)
)

# Проверка
print(Book.objects.all())
```

### Примеры URL

```
# Список по дате (по умолчанию)
http://127.0.0.1:8000/

# Список по названию
http://127.0.0.1:8000/?order=name

# Детальная страница книги
http://127.0.0.1:8000/books/1869-01-01/
```

## Особенности реализации

### 1. Сортировка

Реализована динамическая сортировка через GET параметры:
```python
order_by = request.GET.get('order', 'pub_date')
books = Book.objects.all().order_by(order_by)
```

### 2. Навигация по датам

На детальной странице книги реализована навигация:
- К предыдущей дате публикации
- К следующей дате публикации

```python
previous_book = Book.objects.filter(pub_date__lt=pub_date).order_by('-pub_date').first()
next_book = Book.objects.filter(pub_date__gt=pub_date).order_by('pub_date').first()
```

### 3. Отображение книг с одинаковой датой

Если несколько книг имеют одну дату публикации, на детальной странице отображаются все книги с этой датой:

```python
books_on_date = Book.objects.filter(pub_date=pub_date)
```

### 4. Красивый дизайн

Используется:
- Градиентные фоны
- Анимация при наведении
- Адаптивная верстка
- Эмодзи для улучшения визуального восприятия

### 5. Административная панель

Настроена расширенная админка с:
- Списком всех полей
- Фильтрами по дате и автору
- Поиском по названию и автору
- Иерархией дат для удобной навигации

## Работа с ORM

### Примеры запросов

```python
# Получить все книги
Book.objects.all()

# Сортировка по названию
Book.objects.all().order_by('name')

# Сортировка по дате (от старых к новым)
Book.objects.all().order_by('pub_date')

# Сортировка по дате (от новых к старым)
Book.objects.all().order_by('-pub_date')

# Фильтрация по дате
Book.objects.filter(pub_date='1869-01-01')

# Фильтрация по автору
Book.objects.filter(author='Лев Толстой')

# Книги опубликованные до определенной даты
Book.objects.filter(pub_date__lt='1900-01-01')

# Книги опубликованные после определенной даты
Book.objects.filter(pub_date__gt='1900-01-01')

# Поиск по названию (частичное совпадение)
Book.objects.filter(name__icontains='война')

# Получить первую книгу
Book.objects.first()

# Получить последнюю книгу
Book.objects.last()

# Количество книг
Book.objects.count()
```

## Соответствие стандартам кодирования

Код соответствует PEP 8 и стандартам Нетологии:
- Используются docstrings для документации функций и классов
- Осмысленные имена переменных
- Правильная структура проекта Django
- Разделение логики (models, views, urls)
- Комментарии в ключевых местах
- Типизация параметров в docstrings

## Тестирование

После добавления книг проверьте:
1. Главную страницу - должны отображаться все книги
2. Кнопки сортировки - должны менять порядок книг
3. Клик на книгу - должна открываться детальная страница
4. Навигацию по датам - должна работать корректно
5. Отображение книг с одной датой публикации

## Возможные улучшения

- Добавить пагинацию
- Реализовать поиск по книгам
- Добавить обложки книг
- Реализовать категории/жанры
- Добавить рейтинг книг
- Реализовать систему избранного
- Добавить описание книг
- Реализовать API для работы с библиотекой

## Автор

Решение выполнено для курса "Django: создание функциональных веб-приложений" от Нетологии.
